<nav class="navbar mat-elevation-z5">
  <div class="left">
    <a href="/" mat-button routerLink="/" class="homepage">
      <img class='logo' src="assets/img/logo.png" alt="Open_Aid+">
    </a>
  </div>
  <div class="right">
    <ng-container *ngIf='auth | async as auth'>
      <div class="upload">
        <a class="upload-toggle" (click)='toggleUpload()' mat-icon-button color="primary">
          <mat-icon>cloud_upload</mat-icon>
        </a>
        <app-upload *ngIf='upload' class='mat-elevation-z10'></app-upload>
      </div>
      <div class="login" *ngIf='!auth.authenticated'>
        <a class="login-toggle" (click)='toggleLogin()' mat-icon-button color="primary">
          <mat-icon>person</mat-icon>
        </a>
        <app-login *ngIf='login' class='mat-elevation-z3'></app-login>
      </div>
    </ng-container>
  </div>
</nav>

<mat-form-field class='search-container'>
  <input class='search' type="text" matInput placeholder='Search communities...'>
</mat-form-field>

<div class="map-container">
  <div class="anchor">
    <div class="left map-overlay" [class.open]='overlays.left'>
      <div class="map-overlay-content mat-elevation-z5"></div>
      <a mat-icon-button color="primary" class="mat-elevation-z7 map-overlay-button" (click)='toggleOverlay(true)'>
        <mat-icon>{{overlays.left ? 'keyboard_arrow_left' : 'keyboard_arrow_right'}}</mat-icon>
      </a>
    </div>
    <div class="right map-overlay" [class.open]='overlays.right'>
      <a mat-icon-button color="primary" class="mat-elevation-z7 map-overlay-button" (click)='toggleOverlay(false)'>
        <mat-icon>{{overlays.right ? 'keyboard_arrow_right' : 'keyboard_arrow_left'}}</mat-icon>
      </a>
      <div class="map-overlay-content mat-elevation-z5"></div>
    </div>
  </div>
  <agm-map #gmap class='map' [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDefaultUI]="false" [zoomControl]="false"
    (mapClick)='mapClick(gmap)'>
    <ng-container *ngFor='let request of requests'>
      <agm-info-window #request.iw [latitude]='request.geoData.lat' [longitude]='request.geoData.long' [request]='request'>
        {{request.description}}
      </agm-info-window>
      <agm-circle *ngIf='request' [latitude]='request.geoData.lat' (circleClick)="toggleInfo(iw, gmap)" [longitude]='request.geoData.long'
        [radius]='request.geoData.radius' [fillColor]='"red"'></agm-circle>
    </ng-container>
    <!-- <agm-circle [latitude]="lat + 1" [longitude]="lng + 1" [radius]="50000" [fillColor]="'red'" [circleDraggable]="false" [editable]="false">
    </agm-circle>
    <agm-circle [latitude]="lat - 0.3" [longitude]="lng" [radius]="50000" [fillColor]="'#06f'" [circleDraggable]="false" [editable]="false">
    </agm-circle>
    <agm-marker [latitude]="lat + 0.3" [longitude]="lng">
      <agm-info-window>
        <strong>InfoWindow content</strong>
      </agm-info-window>
    </agm-marker>
    <agm-marker [latitude]="lat - 0.3" [longitude]="lng">
      <agm-info-window>
        <i>InfoWindow content</i>
      </agm-info-window>
    </agm-marker> -->
  </agm-map>

</div>
