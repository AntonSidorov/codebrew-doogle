<nav class="navbar mat-elevation-z5">
  <div class="left">
    <a href="/" mat-button routerLink="/" class="homepage">
      <img class='logo' src="assets/img/logo.png" alt="Open_Aid+">
    </a>
  </div>
  <div class="right">
    <ng-container *ngIf='auth | async as auth'>
      <div class="upload">
        <a class="upload-toggle" (click)='toggleUpload()' mat-icon-button color="primary">
          <mat-icon>cloud_upload</mat-icon>
        </a>
        <app-upload *ngIf='upload' class='mat-elevation-z10'></app-upload>
      </div>
      <div class="login" *ngIf='!auth.authenticated'>
        <a class="login-toggle" (click)='toggleLogin()' mat-icon-button color="primary">
          <mat-icon>person</mat-icon>
        </a>
        <app-login *ngIf='login' class='mat-elevation-z3'></app-login>
      </div>
    </ng-container>
  </div>
</nav>

<mat-form-field class='search-container'>
  <input class='search' type="text" matInput placeholder='Search communities...'>
</mat-form-field>

<div class="map-container">
  <div class="anchor">
    <div class="left map-overlay" [class.open]='true'>
      <div class="map-overlay-content mat-elevation-z5 requests">
        <div *ngFor='let request of requests' class='request' [ngClass]='request.urgency.toLowerCase()' (click)='openIW(request)'>
          <div class="request-name">
            {{request.name}}
          </div>
          <div class="request-description">
            {{request.shortDescription}}
          </div>
          <div class="request-stats">
            <div class="request-stat">
              <mat-icon>person</mat-icon> {{request.peopleAffected}}</div>
            <div class="request-stat">
              <mat-icon>work</mat-icon> {{request.workersRequested}}
            </div>
          </div>
        </div>
      </div>
      <a mat-icon-button color="primary" class="mat-elevation-z7 map-overlay-button" (click)='toggleOverlay(true)'>
        <mat-icon>{{overlays.left ? 'keyboard_arrow_left' : 'keyboard_arrow_right'}}</mat-icon>
      </a>
    </div>
    <div class="right map-overlay" [class.open]='overlays.right'>
      <a mat-icon-button color="primary" class="mat-elevation-z7 map-overlay-button" (click)='toggleOverlay(false)'>
        <mat-icon>{{overlays.right ? 'keyboard_arrow_right' : 'keyboard_arrow_left'}}</mat-icon>
      </a>
      <div class="map-overlay-content mat-elevation-z5"></div>
    </div>
  </div>
  <agm-map #gmap class='map' [latitude]="lat" [longitude]="lng" [zoom]="zoom" [disableDefaultUI]="false" [zoomControl]="false"
    (mapClick)='mapClick(gmap)'>
    <ng-container *ngFor='let request of requests'>
      <agm-info-window #iw [latitude]='request.geoData.lat' [longitude]='request.geoData.long' [request]='request'>
        {{request.description}}
      </agm-info-window>
      <agm-circle *ngIf='request' [latitude]='request.geoData.lat' (circleClick)="toggleInfo(iw, gmap)" [longitude]='request.geoData.long'
        [radius]='request.geoData.radius' [fillColor]='"red"'></agm-circle>
    </ng-container>
  </agm-map>

</div>
